try{var _i1=_i1||{};_i1.vars=_i1.vars||{};_i1.vars.tagUrl=_i1.vars.tagUrl||"https://emea-bmw.netmng.com/es/";var _i1=_i1||{};_i1.core=_i1.core||{};_i1.core.post=function(url,data,successCallback,errorCallback){if(typeof data!=='object'){throw'Data should be an object'}var successCallback=successCallback||function(){};var errorCallback=errorCallback||function(){};var firstPartyCookies=_i1.core.cookies.getFirstParty();if(firstPartyCookies.length>0&&url.indexOf('nmfp=1')===-1){url+=url.indexOf('?')===-1?'?':'&';url+='nmfp=1';url+=firstPartyCookies.join('&')}var xmlhttp=new XMLHttpRequest();xmlhttp.withCredentials=true;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){successCallback(xmlhttp.responseText,url)}else{errorCallback(xmlhttp.statusText)}}};var sendRequest=[];for(var d in data){sendRequest.push(encodeURIComponent(d)+'='+encodeURIComponent(data[d]))}data=sendRequest.join('&');try{xmlhttp.open("POST",url,true);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.send(data)}catch(e){errorCallback(e)}};var _i1=_i1||{};_i1.core=_i1.core||{};_i1.core.errorCounter=_i1.core.errorCounter||0;_i1.core.errorHandler=function(error){if(_i1.core.errorCounter<30){if(_i1.vars.tagUrl.indexOf('?')!==-1){var url=_i1.vars.tagUrl+'&function=jsError'}else{var url=_i1.vars.tagUrl+'?function=jsError'}_i1.core.errorCounter++;var data={'url':document.location.href};if(error.message){data.message=error.message;data.stack=error.stack}else{data.message=error;data.stack=''}_i1.core.post(url,data)}if(typeof _i1.vars.env!=='undefined'&&_i1.vars.env!=='production'){console.error(error)}};_i1.core.tryCatchWrapper=function(f,args){var args=args||null;return function(){try{if(typeof f==='function'){f.apply(this,args!==null?args:arguments)}else{eval(f)}}catch(e){_i1.core.errorHandler(e)}}};var _i1=_i1||{};_i1.core=_i1.core||{};_i1.core.setTimeout=function(func,delay){let args=arguments;delete args[0];delete args[1];let values=Object.keys(args).map(function(e){return args[e]});let callee=_i1.core.tryCatchWrapper(func,values);return window.setTimeout(callee,delay)};_i1.core.setInterval=function(func,delay){let args=arguments;delete args[0];delete args[1];let values=Object.keys(args).map(function(e){return args[e]});let callee=_i1.core.tryCatchWrapper(func,values);return window.setInterval(callee,delay)};var _i1=_i1||{};_i1.core=_i1.core||{};_i1.core.cookies={};_i1.core.cookies.set=function(name,value,days,domain){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString()}else{var expires=""}if(domain){var sDomainName="; domain="+domain}else{var sDomainName=""}document.cookie=name+"="+value+sDomainName+expires+"; path=/"};_i1.core.cookies.get=function(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null};_i1.core.cookies.remove=function(name){_i1.core.cookies.set(name,"",-1)};_i1.core.cookies.getFirstParty=function(){var cookie;var cookies=[];if(_i1.vars.firstPartyCookieMatchingRegexp){while((cookie=_i1.vars.firstPartyCookieMatchingRegexp.exec(document.cookie))!==null){cookies.push(cookie[0])}}return cookies};var _i1=_i1||{};_i1.core=_i1.core||{};_i1.core.ajax=function(url,func,data,callback){data=data||{};if(_i1.core.hasSearch(url)){var searchs=_i1.core.extractSearch(url);for(var i=0;i<searchs.length;i++){var search=searchs[i].split('=');data[search[0]]=data[search[0]]||search[1]}url=_i1.core.removeSearch(url)}data.function=func;if(_i1.core.needLocalStorage(data)){data.lstorage=localStorage.getItem("_i1")}var firstPartyCookies=_i1.core.cookies.getFirstParty();if(firstPartyCookies.length>0&&!data.nmfp){data.nmfp=1;for(var cookieName in firstPartyCookies){if(firstPartyCookies.hasOwnProperty(cookieName)){var indexEqual=firstPartyCookies[cookieName].indexOf('=');data[firstPartyCookies[cookieName].substr(0,indexEqual)]=firstPartyCookies[cookieName].substr(indexEqual+1).replace(/\\+/g,"%2B")}}}url=_i1.core.generateUrl(url,data);var script=document.createElement("SCRIPT");if(typeof(callback)=="function"){if(script.addEventListener){script.addEventListener("load",callback,false)}else{script.onreadystatechange=function(e){if(this.readyState=="loaded"){callback();script=null}}}}script.src=url+"&r="+Math.floor(Math.random()*10000000).toString(16);document.getElementsByTagName("head")[0].appendChild(script)};_i1.core.removeSearch=function(url){return url.substr(0,url.indexOf('?'))};_i1.core.extractSearch=function(url){return url.substr(url.indexOf('?')+1).split('&')};_i1.core.hasSearch=function(url){return url.indexOf('?')!=-1};_i1.core.needLocalStorage=function(data){return localStorage&&localStorage.getItem("_i1")&&typeof _i1.vars.localStorage!=="undefined"&&!data.lstorage};_i1.core.generateUrl=function(url,data){var searchs=[];for(var i in data){searchs.push(i+'='+data[i])}return url+'?'+searchs.join('&')};var _i1=_i1||{};_i1.vars=_i1.vars||{};_i1.vars.firstPartyCookieMatchingRegexp=new RegExp('nmfp_([^=; ]*)=([^;]*)','g');var _i1=_i1||{};_i1.track=_i1.track||{};if(typeof(_i1.track.actions)!=='function'){_i1.track.actions=function(){if(typeof(_nm)!='undefined'){for(var elem=0;elem<_nm.length;elem++){var func='';var data={};var url='';switch(_nm[elem][0]){case'trackurl':if(typeof(_nm[elem][1])!='undefined'){url=_nm[elem][1];if(_nm[elem][1].indexOf('http')==-1){url=document.location.protocol+'//'+document.location.hostname+(url.charAt(0)=='/'?'':'/')+url}func='log_only';data.url=escape(url)}break;case'trigger':func='manualTrigger';if(typeof(_nm[elem][1])!='undefined'&&_nm[elem][1]!='')data.popin=escape(_nm[elem][1]);break;default:if(typeof(_nm[elem][0])!='undefined'&&_nm[elem][0]!=''){func=_nm[elem][0];data.data='';for(var i=1;i<_nm[elem].length;i++)data.data+=escape(_nm[elem][i])+'|';data.data=data.data.substring(0,data.data.length-1)}break}if(func!=''){_i1.core.ajax('https://emea-bmw.netmng.com/es/',func,data)}}_nm=[]}}}if(typeof(_i1.track.actions)=='function'){_i1.core.setInterval(_i1.track.actions,1000)}var _i1=_i1||{};_i1.track=_i1.track||{};_i1.vars=_i1.vars||{};if(typeof(_i1.track.url)!=='function'){_i1.track.url=function(url){_i1.vars.trackUrl=_i1.vars.trackUrl||'';if(url!=_i1.vars.trackUrl){_i1.vars.trackUrl=url;window._nm=window._nm||[];window._nm.push(['trackurl',url])}};nm_track=_i1.track.url}window._i1=window._i1||{};_i1.vars=_i1.vars||Â {};_i1.vars.WP_ProfileID="2uofijlfzixlf"}catch(e){_i1.core.errorHandler(e)}
